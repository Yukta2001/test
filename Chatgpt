def traverse_directories(ssh_client, base_directory):
    try:
        sftp = ssh_client.open_sftp()

        # List directory contents
        dir_contents = sftp.listdir_attr(base_directory)

        # Traverse directory contents
        for item in dir_contents:
            item_path = base_directory + '/' + item.filename

            if stat.S_ISDIR(item.st_mode):
                # It's a directory
                if re.match(r'^NAS.*-AP-Production$', item.filename):
                    # Directory matches the pattern, traverse inside
                    print("Directory:", item_path)
                    traverse_directories(ssh_client, item_path)
                else:
                    # Directory doesn't match the pattern, skip it
                    print("Skipping directory:", item_path)
            else:
                # It's a file, print its path
                print("File:", item_path)

        sftp.close()

    except Exception as e:
        print("Error:", e)
